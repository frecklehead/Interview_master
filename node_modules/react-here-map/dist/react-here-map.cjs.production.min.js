"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=e(t),n=e(require("lodash.merge")),a=require("dot-prop"),o=e(require("@limistah/here-map-js"));const i=["raster.normal.map","raster.normal.xbase","raster.normal.xbasenight","raster.normal.basen","raster.normal.basenight","raster.normal.mapnight","raster.normal.traffic","raster.normal.trafficnight","raster.normal.transit","raster.normal.panoram","raster.normal.panoramnight","raster.normal.labels","raster.normal.metaInfo","raster.satellite.xbase","raster.satellite.base","raster.satellite.map","raster.satellite.traffic","raster.satellite.panorama","raster.satellite.labels","raster.terrain.xbase","raster.terrain.base","raster.terrain.map","raster.terrain.traffic","raster.terrain.panorama","raster.terrain.labels","raster.incidents","raster.venues","vector.normal.map","vector.normal.xbase","vector.normal.xbasenight","vector.normal.basen","vector.normal.basenight","vector.normal.mapnight","vector.normal.traffic","vector.normal.trafficnight","vector.normal.transit","vector.normal.panoram","vector.normal.panoramnight","vector.normal.labels","vector.normal.metaInfo","vector.satellite.xbase","vector.satellite.base","vector.satellite.map","vector.satellite.traffic","vector.satellite.panorama","vector.satellite.labels","vector.terrain.xbase","vector.terrain.base","vector.terrain.map","vector.terrain.traffic","vector.terrain.panorama","vector.terrain.labels","vector.incidents","vector.venues"],s=()=>{},l={VERSION:"v3/3.1",mapEvents:{pointercancel:s,drag:s,dragend:s,tab:s,dbltap:s,pointerdown:s,pointerenter:s,pointerleave:s,pointermove:s,pointerup:s,dragstart:s},MAP_TYPE:"vector.normal.map",mapTypes:i,mapOptions:{zoom:8,center:{lat:6.5243793,lng:3.3792057},mapType:"vector.normal.map"},interactive:!1,includeUI:!1,includePlaces:!1,useEvents:!1,containerId:"HERE_MAP_CONTAINER",defaultClassName:"here-map-container",app_id:"",app_code:"",apikey:""},p=t.createContext({platform:null}),c=t.createContext({map:null,ui:null,interaction:null}),u=e=>{if(!i.includes(e))throw new Error("mapType Should be one from https://developer.here.com/documentation/maps/topics/map-types.html in dot notation")},m=()=>{const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(".grab = {cursor: move;cursor: grab;cursor: -moz-grab;cursor: -webkit-grab;}.grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e)},d=(e,t,r,n)=>{const a=t&&e?new H.mapevents.Behavior(new H.mapevents.MapEvents(e)):null;if(r&&t&&e)for(const t in n)if(n.hasOwnProperty(t)){const r=n[t];r&&"function"==typeof r&&e.addEventListener(t,r)}return a},v=(e,t,r,n)=>{if(!r)throw new Error("includeUI must be set to true to initialize default UI");return H.ui.UI.createDefault(t,e.createDefaultLayers(),n)},f=e=>{let{initializeFn:r,initializeDeps:n,events:a,zoom:o}=e;const i=t.useContext(c);if(!i.map)throw new Error("A map Object must be a child of HMap");return t.useEffect(()=>{var e,t,n;const s=r(i);null==i||null===(e=i.map)||void 0===e||e.getViewModel().setLookAtData({bounds:s.getGeometry()}),null===(t=i.map)||void 0===t||t.setZoom(o||4);const{useEvents:l,interactive:p}=i.options||{};((e,t,r)=>{const{useEvents:n,interactive:a}=r;if(console.log(t),n&&a&&t)for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];n&&"function"==typeof n&&e.addEventListener(r,n)}})(s,a,{interactive:Boolean(p),useEvents:Boolean(l)}),null===(n=i.map)||void 0===n||n.addObject(s)},[n]),null},b=e=>{t.useEffect(()=>{(async function(e){void 0===e&&(e={includePlaces:!1,includeUI:!1,interactive:!1,version:"v3/3.1"});const t=(e=>{const{appId:t,appCode:r,apiKey:a,...o}=e;return n(l,{...o,app_id:t,app_code:r,apikey:a})})(e),{VERSION:r,version:a,interactive:i,includeUI:s}=t;return o({includeUI:s,includePlaces:!1,interactive:i,version:a||r}).then(()=>t)})(e.options).then(e=>{s({...i,options:e})})},[e.options]);const a=()=>{const e=(e=>{const{app_id:t,app_code:r,apikey:n}=e||{};if(!(t&&r||n))throw new Error("Options must include appId and appCode OR an apiKey");const a=window.H;if(void 0===a||!a.service)throw new Error("Here Map JavaScript files are not loaded.");return new a.service.Platform({apikey:String(n)})})(i.options);s(t=>({...t,platform:e}))},[i,s]=t.useState({reInitMap:a,platform:null});t.useEffect(()=>{i.options&&a()},[i.options]);const{platform:c,options:u}=i;return r.createElement(p.Provider,{value:i},"function"==typeof(null==c?void 0:c.setBaseUrl)&&((null==u?void 0:u.app_code)||(null==u?void 0:u.apikey))&&e.children)};exports.HMap=e=>{const o=t.useContext(p),[i,s]=t.useState({map:null,ui:null,options:void 0,interaction:null}),f=e.ref||t.useRef(null);t.useEffect(()=>{var t;const r=n({container:f,build:!0},o.options,{mapOptions:{...null===(t=o.options)||void 0===t?void 0:t.mapOptions,...e.options}},{interactive:e.interactive,useEvents:e.useEvents}),i=((e,t)=>{const{useEvents:r,mapEvents:n,interactive:o,includeUI:i,mapOptions:s,uiLang:l,container:p,build:c}=t,f={map:null,interaction:null,ui:null,options:{...t,mapType:s.mapType||"vector.normal.map"}};if(p&&c&&f.options){u(f.options.mapType);const t=e.createDefaultLayers(),c=a.getProperty(t,f.options.mapType);for(f.map=c?((e,t,r)=>{const n=e.current?new H.Map(e.current,t,r):null;return null==n||n.setCenter(r.center),n})(p,c,s):null;o&&!f.interaction;)f.interaction=d(f.map,o,r,n),i&&(f.ui=v(e,f.map,i,l)),m()}return f})(o.platform,r);s(i)},[]);const{style:b,loadingEl:g,children:y}=e,h={},E=g||r.createElement(()=>r.createElement("div",null,"Loading"),null);return o.platform&&r.createElement(c.Provider,{value:i},r.createElement("div",{id:l.containerId,className:l.defaultClassName,style:b,ref:f},"undefined"==typeof H&&!h&&E,"object"==typeof H&&i.map&&h&&y))},exports.HMapCircle=e=>{const{coords:n,options:a,radius:o,events:i,zoom:s}=e;if(!n.lng||!n.lat)throw new Error("coords should be an object having 'lat' and 'lng' as props");e.radius||console.info("radius is not set, default radius of 1000 is used");const l=t.useCallback(()=>new H.map.Circle(n,o||1e3,a),[n]);return r.createElement(f,{initializeDeps:n,initializeFn:l,events:i,zoom:s})},exports.HMapLayer=e=>{const{type:r}=e,n=t.useContext(c),o=t.useContext(p);if(!n.map)throw new Error("A map Object must be a child of HMap");return u(r),t.useEffect(()=>{var e;const t=null===(e=o.platform)||void 0===e?void 0:e.createDefaultLayers(),i=a.getProperty(t,r);var s;i?null===(s=n.map)||void 0===s||s.addLayer(i):console.error(r," is not supported as a layer.")},[r]),null},exports.HMapMarker=e=>{if(!e.coords.lng||!e.coords.lat)throw new Error("coords should be an object having 'lat' and 'lng' as props");const n=t.useCallback(()=>{const{coords:t,options:r,icon:n}=e,a={...r};return n&&(a.icon=new H.map.Icon(n)),new H.map.Marker(t,a)},[e.coords]);return r.createElement(f,{initializeDeps:e.coords,initializeFn:n,events:e.events})},exports.HMapPolygon=e=>{if(!Array.isArray(e.points))throw new Error("points should be an array of objects containing lat and lng properties");const n=t.useCallback(()=>{const{points:t,options:r}=e;let n;const a=t[0];return"string"==typeof a&&2===a.split(",").length?(n=new H.geo.LineString,t.forEach((function(e){const t=e.split(",").map(e=>Number(e));n.pushLatLngAlt.apply(n,[t[0],t[1],t[2]])}))):n=new H.geo.LineString(t),new H.map.Polygon(n,r)},[e.points]);return r.createElement(f,{initializeDeps:e.points,initializeFn:n,events:e.events})},exports.HMapPolyline=e=>{if(!Array.isArray(e.points))throw new Error("points should be an array of objects containing lat and lng properties");const n=t.useCallback(()=>{const{points:t,options:r}=e,n=new H.geo.LineString;return t.forEach((function(e){n.pushPoint(e)})),new H.map.Polyline(n,r)},[e.points]);return r.createElement(f,{initializeDeps:e.points,initializeFn:n,events:e.events})},exports.HMapRectangle=e=>{if(!Array.isArray(e.points))throw new Error("points should be an array of objects containing lat and lng properties");const n=t.useCallback(()=>{const{points:t,options:r}=e,n=new H.geo.Rect(t[0],t[1],t[2],t[3]);return new H.map.Rect(n,r)},[e.points]);return r.createElement(f,{initializeDeps:e.points,initializeFn:n,events:e.events})},exports.HPlatform=b,exports.useHPlatform=(e,t)=>r.createElement(b,{options:e},t);
//# sourceMappingURL=react-here-map.cjs.production.min.js.map
